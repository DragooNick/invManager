<div class="container">
    <nav class="navbar navbar-inverse">
  		<div class="container-fluid">
    		<div class="navbar-header">
      		<a class="navbar-brand" href="#">Inventory Manager</a>
    	</div>
    	<ul class="nav navbar-nav">
      		<li><a ui-sref="login">Home</a></li>
      		<li class="active"><a ui-sref="invMan">Inventory Manager</a></li>
      		<li><a ui-sref="admin">Administration</a></li>
      		<li><a ui-sref="about">About</a></li>
    	</ul>
    	<ul class="nav navbar-nav navbar-right">
      		<li><a ui-sref="login"><span class="glyphicon glyphicon-user"></span> Sign Up</a></li>
      		<li><a ui-sref="login"><span class="glyphicon glyphicon-log-in"></span> Login</a></li>
    	</ul>
  		</div>
	</nav>

	<uib-tabset active="activeJustified" justified="true">
		<uib-tab index="0" heading="Card Search">

		</uib-tab>
		<uib-tab index="1" heading="Inventory">

		</uib-tab>
		<uib-tab index="2" heading="Decks">
		</uib-tab>
	</uib-tabset>
		<h2>Card Search</h2>
	<div ng-model="cards">
		<form ng-submit="searchCard()">
			<input type="text"
				ng-model="cardSearch.card"
				uib-typeahead="card for card in cards | filter:$viewValue | limitTo:9" 
				placeholder="Card Name" 
				class="form-control"/>
			<button class="btn">
				<span class="glyphicon glyphicon-search"></span> Search Card {{cardSearch.card}}
			</button>
		</form>

		<table class="table">
			<tr>
				<td ng-repeat="card in cardsFound">
					<div class="invMan__cards">
						<img src="http://gatherer.wizards.com/Handlers/Image.ashx?multiverseid={{card.cards[0].multiverseid}}&type=card" width="224" height="320" alt="{{card.cards[0].name}}"/>
					</div>
				</td>
			</tr>
			<tr>
				<td ng-repeat="card in cardsFound">
					<button class="btn" 
						ng-click="getDecknames(decks)">
						Get Decknames
					</button>
					{{getDecknames(decks)}}
					<button class="btn btn-success"
						ng-click="addCard(card.cards[0])">
						<span class="glyphicon glyphicon-plus"></span> Add Card
					</button>
					<select class="selectpicker"
						ng-model="decknames">
						<optgroup ng-repeat="(key, value) in decknames | orderBy: 'format' | groupBy: 'format' "
					  		label="{{key}}">
					  		<option ng-repeat="deck in value | orderBy: 'deckname'">{{deck.deckname}}</option>
						</optgroup>
					</select>
					<button class="btn"
						ng-click="addCardToDeck(card.cards[0], {'deckname': deckname})">
						<span class="glyphicon glyphicon-plus"></span> Add Card
					</button>
				</td>
			</tr>
		</table>
	</div>
			<h2>Inventory</h2>
	<div ng-model="inventory">
		<table class="table">
			<tr>
				<th>
					Amount
				</th>
				<th>
					Total
				</th>
				<th>
					{{getTotal(inventory)}}
				</th>
			</tr>
			<tr ng-repeat="card in inventory | orderBy: 'name'">
				<td>
					{{card.amount}}
				</td>
				<td class="invMan__cards">
					<img src="http://gatherer.wizards.com/Handlers/Image.ashx?multiverseid={{card.multiverseid}}&type=card" width="224" height="320" alt="{{card.name}}"/>
				</td>
				<td>
					<button class="btn btn-success"
						ng-click="addCard(card)">
						<span class="glyphicon glyphicon-plus"></span> Add Card
					</button>
					<button class="btn"
						 ng-click="subtractCard(card)">
						<span class="glyphicon glyphicon-minus"></span> Subtract Card
					</button>
					<button class="btn btn-danger"
						 ng-click="delCard(card)">
						<span class="glyphicon glyphicon-remove"></span> Delete Card
					</button>
					<select class="selectpicker"
						ng-model="decknames">
						<optgroup ng-repeat="(key, value) in decknames | orderBy: 'format' | groupBy: 'format' "
					  		label="{{key}}">
					  		<option ng-repeat="deck in value | orderBy: 'deckname'">{{deck.deckname}}</option>
						</optgroup>
					</select>
					<button class="btn btn-success"
						ng-click="addCardToDeck(card, deck)">
						<span class="glyphicon glyphicon-plus"></span> Add Card
					</button>
				</td>
			</tr>
		</table>
	</div>
			<h2>Decks</h2>
	<div ng-model="decks">
		<table class="table">
			<tr>
				<th>Deck Name</th>
				<th>Cards</th>
			</tr>
			<tr ng-repeat="deck in decks | orderBy: 'deckname'">
				<td>
					<div class="panel panel-default invMan__deck-panel">
					<div class="panel-heading">
						<h3 class="panel-title">{{deck.deckname}}</h3>
					</div>
					<div class="panel-body">
						{{getDeckList(deck.cards)}}
					</div>
					<div class="panel-footer">Cards: {{getTotal(deck.cards)}}</div>
					</div>
					<button class="btn btn-danger"
						ng-click="delDeck(deck)">
						<span class="glyphicon glyphicon-remove"></span> Delete Deck
					</button>
				</td>
				<td class="invMan__cards" 
					ng-repeat="card in deck.cards">
					<img src="http://gatherer.wizards.com/Handlers/Image.ashx?multiverseid={{card.multiverseid}}&type=card" width="224" height="320" alt="{{card.name}}"/>
					<button class="btn btn-success"
						ng-click="addCardToDeck(card, deck)">
						<span class="glyphicon glyphicon-plus"></span> Add Card
					</button>
					<button class="btn"
						 ng-click="subtractCardFromDeck(card, deck)">
						<span class="glyphicon glyphicon-minus"></span> Subtract Card
					</button>
					<button class="btn btn-danger"
						 ng-click="delCardFromDeck(card, deck)">
						<span class="glyphicon glyphicon-remove"></span> Delete Card
					</button>
				</td>
			</tr>
			<tr>
				<td>
				<input type="text"
					class="form-control invMan__deck-input" 
					placeholder="Deck Name"
					ng-model="deckToAdd">
				</form>
				<uib-tabset>
				<uib-tab index="0" heading="Type List">
					<textarea class="invMan__textarea">
					</textarea>
				</uib-tab>
				<uib-tab index="1" heading="Upload List">
					<input type="file" 
						nv-file-select uploader="uploader" placeholder="Decklist" />
                	<button ng-click="uploader.queue.item.upload()" 
                		class="btn">
                		Upload Deck
                	</button>
				</uib-tab>
				</uib-tabset>
				<button class="btn btn-success"
					ng-click="addDeck(deckToAdd)">
					<span class="glyphicon glyphicon-plus"></span> Add Deck
				</button>
				</td>
			</tr>
		</table>
	</div>	
</div>